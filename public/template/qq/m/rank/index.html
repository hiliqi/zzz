{extend name="./template/qq/m/pub/base.html" /}
{block name="seo"}
<title>漫画排行榜-{$site_name}</title>
{/block}
{block name="css"}
<link rel="stylesheet" href="/template/qq/css/rank.css"/>
{/block}
{block name="main"}
<header class="top-bar #bar_style#">
    <a class="btn-top back" href="/">[返回]</a>
    <h1 class="top-title">排行</h1>
    <div class="top-logo">[腾讯动漫LOGO]</div>
    <div class="padding"></div>
    <a class="btn-top search" href="/{$search_ctrl}">[搜索]</a>
    <a class="btn-top menu">[菜单]</a>
</header>
<div id="app">
    <!--头部切换页签部分-->
    <section class="rank-tab under-top-bar">
        <div class="tab-list">
            <a id="tab_update" class="tab-list-item" :class="{'active':pos == 1}" @click="switchTab(1)">更新榜</a>
            <a id="tab_pay" class="tab-list-item" :class="{'active':pos == 2}" @click="switchTab(2)">推荐榜</a>
            <a id="tab_hot" class="tab-list-item" :class="{'active':pos == 3}" @click="switchTab(3)">点击榜</a>
            <a id="tab_mt" class="tab-list-item" :class="{'active':pos == 4}" @click="switchTab(4)">完结榜</a>
        </div>
    </section>
    <!--头部top3部分-->
    <section class="rank-top3">
        <div class="top3-box" :class="{'active':pos == 1}">
            {raccoon:books name="books" order="last_time desc" limit="3" key="j"}
            <div class="top3-box-item top3-box-item{if $j == 1}2{elseif $j == 2}1{else}3{/if}">
                <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                    <img class="comic-cover" src="{$vo.cover_url}" alt="">
                    <strong class="comic-title">{$vo.book_name}</strong>
                    <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                </a>
            </div>
            {/raccoon:books}
        </div>
        <div class="top3-box" :class="{'active':pos == 2}">
            {raccoon:books name="books" order="last_time desc" where="is_top=1" limit="3" key="j"}
            <div class="top3-box-item top3-box-item{if $j == 1}2{elseif $j == 2}1{else}3{/if}">
                <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                    <img class="comic-cover" src="{$vo.cover_url}" alt="">
                    <strong class="comic-title">{$vo.book_name}</strong>
                    <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                </a>
            </div>
            {/raccoon:books}
        </div>
        <div class="top3-box" :class="{'active':pos == 3}">
            {raccoon:books name="books" order="hits desc" limit="3" key="j"}
            <div class="top3-box-item top3-box-item{if $j == 1}2{elseif $j == 2}1{else}3{/if}">
                <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                    <img class="comic-cover" src="{$vo.cover_url}" alt="">
                    <strong class="comic-title">{$vo.book_name}</strong>
                    <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                </a>
            </div>
            {/raccoon:books}
        </div>
        <div class="top3-box" :class="{'active':pos == 4}">
            {raccoon:books name="books" order="last_time desc" where="end=1" limit="3" key="j"}
            <div class="top3-box-item top3-box-item{if $j == 1}2{elseif $j == 2}1{else}3{/if}">
                <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                    <img class="comic-cover" src="{$vo.cover_url}" alt="">
                    <strong class="comic-title">{$vo.book_name}</strong>
                    <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                </a>
            </div>
            {/raccoon:books}
        </div>
    </section>
    <!--下方的排序列表部分-->
    <section class="rank-orderedList">
        <div class="comic-list-box" :class="{'active':pos == 1}">
            <ul class="comic-list">
                {raccoon:books name="books" order="last_time desc" limit="4,20"}
                <li class="comic-item">
                    <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                        <div class="comic-cover">
                            <img class="cover-image" src="{$vo.cover_url}">
                        </div>
                        <div class="comic-info">
                            <strong class="comic-title">{$vo.book_name}</strong>
                            <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                            <small class="comic-tag">{$vo.tags}</small>
                            <small class="comic-desc">{$vo.summary}</small>
                            <i class="comic-index">{$i + 3}</i>
                        </div>
                    </a>
                </li>
                {/raccoon:books}
            </ul>
        </div>

        <div class="comic-list-box" :class="{'active':pos == 2}">
            <ul class="comic-list">
                {raccoon:books name="books" order="last_time desc" where="is_top=1" limit="4,20"}
                <li class="comic-item">
                    <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                        <div class="comic-cover">
                            <img class="cover-image" src="{$vo.cover_url}">
                        </div>
                        <div class="comic-info">
                            <strong class="comic-title">{$vo.book_name}</strong>
                            <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                            <small class="comic-tag">{$vo.tags}</small>
                            <small class="comic-desc">{$vo.summary}</small>
                            <i class="comic-index">{$i + 3}</i>
                        </div>
                    </a>
                </li>
                {/raccoon:books}
            </ul>
        </div>

        <div class="comic-list-box" :class="{'active':pos == 3}">
            <ul class="comic-list">
                {raccoon:books name="books" order="hits desc" limit="4,20"}
                <li class="comic-item">
                    <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                        <div class="comic-cover">
                            <img class="cover-image" src="{$vo.cover_url}">
                        </div>
                        <div class="comic-info">
                            <strong class="comic-title">{$vo.book_name}</strong>
                            <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                            <small class="comic-tag">{$vo.tags}</small>
                            <small class="comic-desc">{$vo.summary}</small>
                            <i class="comic-index">{$i + 3}</i>
                        </div>
                    </a>
                </li>
                {/raccoon:books}
            </ul>
        </div>

        <div class="comic-list-box" :class="{'active':pos == 4}">
            <ul class="comic-list">
                {raccoon:books name="books" order="last_time desc" where="end=1" limit="4,20"}
                <li class="comic-item">
                    <a class="comic-link" href="/{$book_ctrl}/{$vo.param}">
                        <div class="comic-cover">
                            <img class="cover-image" src="{$vo.cover_url}">
                        </div>
                        <div class="comic-info">
                            <strong class="comic-title">{$vo.book_name}</strong>
                            <small class="comic-update">{$vo.last_time|date="Y-m-d"}</small>
                            <small class="comic-tag">{$vo.tags}</small>
                            <small class="comic-desc">{$vo.summary}</small>
                            <i class="comic-index">{$i + 3}</i>
                        </div>
                    </a>
                </li>
                {/raccoon:books}
            </ul>
        </div>
    </section>
</div>
{/block}
{block name="js"}
<script src="https://lib.baomitu.com/vue/2.6.10/vue.min.js"></script>
<script>
    var app = new Vue({
        el: '#app',
        data: {
            pos:1,
        },
        methods: {
            switchTab(pos) {
                this.pos = pos
            }
        }
    });
</script>
{/block}
